services:
  - type: web
    name: bank-statement-parser
    env: docker
    dockerfilePath: ./Dockerfile
    healthCheckPath: /health
    autoDeploy: true
    envVars:
      - key: GROQ_API_KEYS
        sync: false
      - key: GROQ_MODEL
        value: "meta-llama/llama-4-scout-17b-16e-instruct"
      - key: LOG_LEVEL
        value: "INFO"
      - key: OCR_MAX_PAGES
        value: "100"
      - key: AI_RETRY_COUNT
        value: "1"
      - key: MAX_PDF_SIZE_MB
        value: "25"
      - key: AI_TIMEOUT_SECONDS
        value: "45"
      - key: AI_MAX_PAYLOAD_CHARS
        value: "29950"
      - key: ALLOW_AI_PAYLOAD_TRUNCATION
        value: "false"
      - key: RATE_LIMIT
        value: "8/minute"
      - key: RATE_LIMIT_ENABLED
        value: "true"
      - key: AI_CHUNK_DELAY_SECONDS
        value: "12"
      - key: AI_RATE_LIMIT_RETRY_COUNT
        value: "3"